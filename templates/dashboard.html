{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard - Leadership Bridge Nigeria</title>

  <!-- Bootstrap 5 CSS (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static './style.css' %}">
  
  <style>
    /* Reuse homepage styles for consistency */
    .logo {
      width: 57px;
      height: 50px;
    }
    
    body {
      padding-top: 76px; /* Offset for fixed navbar */
      background-color: #f9f8f5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Dashboard specific styles */
    .dashboard-header {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 2rem 0;
      margin-bottom: 2rem;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .dashboard-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      border: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      margin-bottom: 1.5rem;
    }
    
    .dashboard-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
    }
    
    .member-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #28a745;
      background-color: #e9ecef;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      color: #6c757d;
      margin: 0 auto 1rem;
    }
    
    .id-card-container {
      text-align: center;
      padding: 1.5rem;
      background: #f8f9fa;
      border-radius: 10px;
      border: 1px dashed #ced4da;
    }
    
    .id-card-img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin: 1rem 0;
      transition: transform 0.3s ease;
    }
    
    .id-card-img:hover {
      transform: scale(1.02);
    }
    
    .btn-download {
      background-color: #28a745;
      color: white;
      padding: 0.5rem 1.5rem;
      border-radius: 8px;
      border: none;
      font-weight: 500;
      transition: background-color 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-download:hover {
      background-color: #218838;
      color: white;
      text-decoration: none;
    }
    
    .status-badge {
      background-color: #e8f5e9;
      color: #28a745;
      padding: 0.35rem 0.75rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    .dashboard-nav {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      padding: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .dashboard-nav .nav-link {
      color: #495057;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.2s ease;
    }
    
    .dashboard-nav .nav-link.active,
    .dashboard-nav .nav-link:hover {
      background-color: #28a745;
      color: white;
    }
    
    /* Footer consistency */
    footer {
      margin-top: auto;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .dashboard-header {
        text-align: center;
        padding: 1.5rem 0;
      }
      
      .member-avatar {
        width: 100px;
        height: 100px;
        font-size: 2rem;
      }
    }
  </style>
</head>

<body>
  <!-- NAVBAR (Same as Homepage) -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow fixed-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img class="logo" src="{% static './assets/images/leadership bridge.avif' %}" alt="LBN Logo">
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
        aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          {% if user.is_authenticated %}
          <li class="nav-item"><a class="nav-link" href="/index/">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
          <li class="nav-item"><a class="nav-link" href="bog">Board of Governance</a></li>
          <li class="nav-item"><a class="nav-link" href="register">Member Registration</a></li>
          <li class="nav-item"><a class="nav-link" href="/news/">Programs</a></li>
          <li class="nav-item"><a class="nav-link" href="/events/">Events</a></li>
          <li class="nav-item"><a class="nav-link" href="/donate/">Donations</a></li>
          <li class="nav-item"><a class="nav-link active" href="dashboard">Dashboard</a></li>
          {% else %}
          <li class="nav-item"><a class="nav-link" href="/index/">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
          <li class="nav-item"><a class="nav-link" href="bog">Board of Governance</a></li>
          <li class="nav-item"><a class="nav-link" href="/join/">Member Registration</a></li>
          <li class="nav-item"><a class="nav-link" href="/news/">Programs</a></li>
          <li class="nav-item"><a class="nav-link" href="/events/">Events</a></li>
          <li class="nav-item"><a class="nav-link" href="/donate/">Donations</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <!-- DASHBOARD HEADER -->
  <header class="dashboard-header">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-8">
          <h1 class="display-6 fw-bold mb-2">Welcome, {{ member.full_name }}!</h1>
          <p class="lead mb-0 opacity-75">Manage your membership and access exclusive resources</p>
        </div>
        <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
          <span class="status-badge">
            {{ member.get_role_display }}
          </span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN DASHBOARD CONTENT -->
  <main class="container flex-grow-1 py-4">
    <div class="row">
      
      <!-- Sidebar Navigation -->
      <div class="col-lg-3 mb-4">
        <div class="dashboard-nav">
          <h6 class="text-muted text-uppercase small fw-bold mb-3 px-2">Dashboard</h6>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active" href="#"><i class="bi bi-house-door me-2"></i>Overview</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><i class="bi bi-person me-2"></i>Profile</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><i class="bi bi-card-checklist me-2"></i>Membership</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><i class="bi bi-calendar-event me-2"></i>Events</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><i class="bi bi-gear me-2"></i>Settings</a>
            </li>
            <li class="nav-item mt-3 pt-3 border-top">
              <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="nav-link text-danger border-0 bg-transparent w-100 text-start px-2">
                  <i class="bi bi-box-arrow-right me-2"></i>Logout
                </button>
              </form>
            </li>
          </ul>
        </div>
      </div>
      
      <!-- Main Content Area -->
      <div class="col-lg-9">
        
        <!-- Member Info Card -->
        <div class="dashboard-card p-4">
          <div class="row align-items-center">
            <div class="col-md-3 text-center">
              <div class="member-avatar">
                {{ member.full_name|first|upper }}
              </div>
            </div>
            <div class="col-md-9">
              <h4 class="fw-bold mb-1">{{ member.full_name }}</h4>
              <p class="text-muted mb-3">Membership ID: <strong class="text-dark">{{ member.membership_id }}</strong></p>
              <div class="d-flex flex-wrap gap-2">
                <span class="badge bg-light text-dark border">
                  <i class="bi bi-person-badge me-1"></i> {{ member.get_role_display }}
                </span>
                <span class="badge bg-light text-dark border">
                  <i class="bi bi-calendar-check me-1"></i> Member Since: {{ member.date_joined|date:"M Y" }}
                </span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- ID Card Section -->
        <div class="dashboard-card p-4">
          <h5 class="fw-bold mb-4 pb-2 border-bottom">Your ID Card</h5>
          
          {% if member.id_card %}
            <div class="id-card-container">
              <p class="text-muted mb-2">Your official membership ID card:</p>
              <img src="{{ member.id_card.url }}" alt="ID Card" class="id-card-img">
              <br>
              <a href="{{ member.id_card.url }}" download class="btn-download">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                  <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                </svg>
                Download ID Card
              </a>
            </div>
          {% else %}
            <div class="text-center py-5">
              <div class="spinner-border text-success mb-3" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
              <h6 class="fw-medium">Your ID Card is being generated</h6>
              <p class="text-muted mb-0">Please refresh the page in a few moments</p>
              <button class="btn btn-outline-success mt-3" onclick="location.reload()">
                <i class="bi bi-arrow-clockwise me-1"></i> Refresh
              </button>
            </div>
          {% endif %}
        </div>
        
        <!-- Quick Actions -->
        <div class="dashboard-card p-4">
          <h5 class="fw-bold mb-4 pb-2 border-bottom">Quick Actions</h5>
          <div class="row g-3">
            <div class="col-md-4">
              <a href="#" class="btn btn-outline-success w-100 py-3 d-flex flex-column align-items-center">
                <i class="bi bi-person-fill fs-4 mb-2"></i>
                <span class="small fw-medium">Edit Profile</span>
              </a>
            </div>
            <div class="col-md-4">
              <a href="#" class="btn btn-outline-success w-100 py-3 d-flex flex-column align-items-center">
                <i class="bi bi-calendar2-event fs-4 mb-2"></i>
                <span class="small fw-medium">Upcoming Events</span>
              </a>
            </div>
            <div class="col-md-4">
              <a href="#" class="btn btn-outline-success w-100 py-3 d-flex flex-column align-items-center">
                <i class="bi bi-question-circle fs-4 mb-2"></i>
                <span class="small fw-medium">Get Support</span>
              </a>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </main>

  <!-- FOOTER (Same as Homepage) -->
  <footer class="py-4 bg-success text-white text-center mt-auto">
    <p class="fs-7 mb-2" style="color: black;">Promoting good governance through workshops and seminars.</p>
    <div class="container text-center">  
      <small class="text-white text-muted fs-7">Â© 2025, All rights reserved |</small>
      <small class="text-white text-muted fs-7"> Designed by DH Team | +2348033160687</small>
      <div class="mt-2">
        <a href="https://x.com/csf9ja" class="text-white me-3 text-decoration-none">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
            <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
          </svg>
        </a>
        <a href="https://web.facebook.com/people/Community-Structure-Foundation-For-Good-Governance-CSF/61580231864535/" class="text-white text-decoration-none">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
            <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
          </svg>
        </a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.js"></script>
  <script src="{% static './assets/js/main.js' %}"></script>
  
  <!-- Optional: Add animation on load -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Add subtle fade-in animation to dashboard cards
      const cards = document.querySelectorAll('.dashboard-card');
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
        setTimeout(() => {
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, 150 * index);
      });
    });
  </script>
</body>
</html>